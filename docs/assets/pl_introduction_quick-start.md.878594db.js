import{_ as s,c as n,o as a,d as l}from"./app.8706ebaa.js";const p="/CraftContainers/assets/spleef-gamemap.5db9e3e5.png",E=JSON.parse('{"title":"Szybki start - przyk\u0142ad gry Spleef","description":"","frontmatter":{},"headers":[{"level":2,"title":"Faza budowania mapy","slug":"faza-budowania-mapy","link":"#faza-budowania-mapy","children":[]},{"level":2,"title":"Klasa odpowiadaj\u0105ca za map\u0119","slug":"klasa-odpowiadajaca-za-mape","link":"#klasa-odpowiadajaca-za-mape","children":[]},{"level":2,"title":"Stan gry","slug":"stan-gry","link":"#stan-gry","children":[]},{"level":2,"title":"Stan gracza","slug":"stan-gracza","link":"#stan-gracza","children":[]},{"level":2,"title":"Event handler","slug":"event-handler","link":"#event-handler","children":[]},{"level":2,"title":"G\u0142\xF3wny rdze\u0144 spleef","slug":"g\u0142owny-rdzen-spleef","link":"#g\u0142owny-rdzen-spleef","children":[]},{"level":2,"title":"Kontroller logiki spleef","slug":"kontroller-logiki-spleef","link":"#kontroller-logiki-spleef","children":[]},{"level":2,"title":"G\u0142\xF3wna klasa kontenera","slug":"g\u0142owna-klasa-kontenera","link":"#g\u0142owna-klasa-kontenera","children":[]},{"level":2,"title":"Uruchamianie","slug":"uruchamianie","link":"#uruchamianie","children":[]}],"relativePath":"pl/introduction/quick-start.md"}'),o={name:"pl/introduction/quick-start.md"},e=l('<h1 id="szybki-start-przyk\u0142ad-gry-spleef" tabindex="-1">Szybki start - przyk\u0142ad gry Spleef <a class="header-anchor" href="#szybki-start-przyk\u0142ad-gry-spleef" aria-hidden="true">#</a></h1><p>Proste wprowadzenie do pracy z CraftContainers.</p><p>Funkcjonalno\u015Bci umieszczamy wewn\u0105trz komponent\xF3w. Ka\u017Cdy komponent posiada wbudowane zdarzenia wewn\u0119trzne, kt\xF3re odpowiadaj\u0105 za r\xF3\u017Cne etapy cyklu \u017Cycia oraz interakcj\u0119 z graczami.</p><ul><li><p><strong>onComponentInit()</strong> \u2013 Wywo\u0142ywany automatycznie, gdy komponent zostaje utworzony. U\u017Cywany do inicjalizacji komponentu (np. tworzenie zasob\xF3w, uruchamianie w\u0105tk\xF3w, inicjowanie logiki).</p></li><li><p><strong>onComponentDestroy()</strong> \u2013 Wywo\u0142ywany automatycznie, gdy komponent jest wy\u0142\u0105czany. U\u017Cywany do usuwania zasob\xF3w i element\xF3w stworzonych przez komponent (np. zatrzymywanie w\u0105tk\xF3w, czyszczenie danych).</p></li><li><p><strong>onPlayerInit()</strong> \u2013 Wywo\u0142ywany automatycznie, gdy gracz do\u0142\u0105cza do sesji (lub je\u015Bli komponent zosta\u0142 uruchomiony po do\u0142\u0105czeniu gracza). U\u017Cywany do nadania graczowi w\u0142a\u015Bciwo\u015Bci, przenoszenia go na map\u0119 itp.</p></li><li><p><strong>onPlayerDestroy()</strong> \u2013 Wywo\u0142ywany automatycznie, gdy gracz opuszcza sesj\u0119. U\u017Cywany do usuwania w\u0142a\u015Bciwo\u015Bci gracza, kt\xF3re by\u0142y przypisane na potrzeby sesji (np. usuwanie efekt\xF3w czy zmiany statusu).</p></li></ul><h2 id="faza-budowania-mapy" tabindex="-1">Faza budowania mapy <a class="header-anchor" href="#faza-budowania-mapy" aria-hidden="true">#</a></h2><ol><li>Uruchom edytor schemat\xF3w: <code>/blueprint edit simplespleef#mygamemap</code></li><li>Zbuduj prost\u0105 aren\u0119 spleef wed\u0142ug w\u0142asnego pomys\u0142u.</li><li>Oznacz kluczowe lokacje na mapie:</li></ol><ul><li><code>/marker givemarkerblock spawn</code> - postaw blok w miejscu spawn graczy</li><li><code>/marker givemarkerblock pos1</code> - postaw blok w jednym rogu na wysoko\u015Bci \u015Bniegu</li><li><code>/marker givemarkerblock pos2</code> - postaw blok w przeciwnym rogu na wysoko\u015Bci \u015Bniegu</li></ul><ol start="4"><li>Zapisz projekt: <code>/blueprint save</code></li><li>Opu\u015B\u0107 edytor: <code>/blueprint exit</code></li></ol><p><img src="'+p+`" alt="mapa spleef"></p><p><a href="/CraftContainers/pl/learn/blueprint.html">Dowiedz si\u0119 wi\u0119cej o edytorze Blueprint.</a></p><h2 id="klasa-odpowiadajaca-za-mape" tabindex="-1">Klasa odpowiadaj\u0105ca za map\u0119 <a class="header-anchor" href="#klasa-odpowiadajaca-za-mape" aria-hidden="true">#</a></h2><p><a href="/CraftContainers/pl/learn/gamemap-generating.html">Dowiedz si\u0119 wi\u0119cej generowaniu mapy.</a></p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki"><code><span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">class</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">SpleefGameMap</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">extends</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">GameMap</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;">// Pliki wygenerowane w edytorze map (schemat i markery)</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">private</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">final</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">static</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> NAME </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">mygamemap</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;">// Nazwa pluginu musi by\u0107 &quot;SimpleSpleef&quot;, aby arena by\u0142a poprawnie rozpoznana</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;">// (np. jako simplespleef#mygamemap)</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">private</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">final</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">static</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">File</span><span style="color:#A6ACCD;"> SCHEMATIC_FILE </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> ISchematic</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">getFile</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">SimpleSpleef</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">getInstance</span><span style="color:#89DDFF;">(),</span><span style="color:#A6ACCD;"> NAME</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">private</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">final</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">static</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">File</span><span style="color:#A6ACCD;"> MARKERS_FILE </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> IMarkers</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">getFile</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">SimpleSpleef</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">getInstance</span><span style="color:#89DDFF;">(),</span><span style="color:#A6ACCD;"> NAME</span><span style="color:#89DDFF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;">// Schemat mapy i zestaw marker\xF3w (np. spawn, strefa eliminacji) </span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;">// dostosowane do bie\u017C\u0105cej instancji gry</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">private</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">ISchematic</span><span style="color:#89DDFF;">&lt;</span><span style="color:#C792EA;">?</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;"> schematic</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">private</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">Markers</span><span style="color:#A6ACCD;"> markers</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">SpleefGameMap</span><span style="color:#89DDFF;">(@</span><span style="color:#C792EA;">NotNull</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">Container</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;">container</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">@</span><span style="color:#C792EA;">NotNull</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">ISpaceAllocator</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;">allocator</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">        super</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">container</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> allocator</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">SpleefGameMap</span><span style="color:#89DDFF;">(@</span><span style="color:#C792EA;">NotNull</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">Container</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;">container</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">        super</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">container</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> Allocators</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">defaultRecyclingAllocator</span><span style="color:#89DDFF;">());</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;">// Generowanie mapy \u2013 wstawienie schematu w przestrze\u0144 gry</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">@</span><span style="color:#C792EA;">Override</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">protected</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">void</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">generate</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">        </span><span style="color:#676E95;">// Wczytanie schematu mapy i ustawienie go w wyznaczonym obszarze</span></span>
<span class="line"><span style="color:#A6ACCD;">        schematic </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> Schematics</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">newMassive</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">SCHEMATIC_FILE</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">space</span><span style="color:#89DDFF;">(),</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">center</span><span style="color:#89DDFF;">());</span></span>
<span class="line"><span style="color:#A6ACCD;">        schematic</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">load</span><span style="color:#89DDFF;">();</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">        </span><span style="color:#676E95;">// Wczytanie marker\xF3w (np. spawn, strefy gry) z pliku</span></span>
<span class="line"><span style="color:#A6ACCD;">        markers </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> Markers</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">read</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">MARKERS_FILE</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">center</span><span style="color:#89DDFF;">());</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;">// Czyszczenie mapy - zwyk\u0142e usuni\u0119cie ternu gdzie by\u0142 schemat</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">@</span><span style="color:#C792EA;">Override</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">protected</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">void</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">degenerate</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">        </span><span style="color:#676E95;">// Allocator przydziela przestrze\u0144 dla GameMap.</span></span>
<span class="line"><span style="color:#89DDFF;">        </span><span style="color:#676E95;">// Je\u015Bli ponownie u\u017Cywa tego samego obszaru, musisz zadba\u0107 o jego wyczyszczenie.</span></span>
<span class="line"><span style="color:#89DDFF;">        </span><span style="color:#676E95;">// Aby tego unikn\u0105\u0107, zdefinuj na sztywno allocator, kt\xF3ry automatycznie czy\u015Bci przestrze\u0144.</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">        </span><span style="color:#676E95;">// Sprawdzamy, czy przestrze\u0144 wymaga r\u0119cznego czyszczenia</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">if</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(!</span><span style="color:#82AAFF;">space</span><span style="color:#89DDFF;">().</span><span style="color:#82AAFF;">requiresCleanup</span><span style="color:#89DDFF;">())</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">return</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">        </span><span style="color:#676E95;">// Usuni\u0119cie schematu z mapy</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">if</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">schematic </span><span style="color:#89DDFF;">!=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">null)</span></span>
<span class="line"><span style="color:#A6ACCD;">            schematic</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">clean</span><span style="color:#89DDFF;">();</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;">// Kiedy mapa uruchomi si\u0119</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">@</span><span style="color:#C792EA;">Override</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">void</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">onComponentInit</span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">ComponentConstructor</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;">event</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">        </span><span style="color:#676E95;">// Pobranie kluczowych lokalizacji z marker\xF3w</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#C792EA;">var</span><span style="color:#A6ACCD;"> spawn </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> markers</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">requireOneLocationByName</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">spawn</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#C792EA;">var</span><span style="color:#A6ACCD;"> eliminated </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> markers</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">requireOneLocationByName</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">eliminated</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#C792EA;">var</span><span style="color:#A6ACCD;"> pos1 </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> markers</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">requireOneLocationByName</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">pos1</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#C792EA;">var</span><span style="color:#A6ACCD;"> pos2 </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> markers</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">requireOneLocationByName</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">pos2</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">        </span><span style="color:#676E95;">// Uruchomienie logiki gry (rdzenia Spleefa) z u\u017Cyciem wczytanych punkt\xF3w</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">SpleefCore</span><span style="color:#89DDFF;">(this,</span><span style="color:#A6ACCD;"> spawn</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> eliminated</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> pos1</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> pos2</span><span style="color:#89DDFF;">).</span><span style="color:#82AAFF;">start</span><span style="color:#89DDFF;">();</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre></div><h2 id="stan-gry" tabindex="-1">Stan gry <a class="header-anchor" href="#stan-gry" aria-hidden="true">#</a></h2><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki"><code><span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">enum</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">GameState</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">    WAITING</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">    PLAY</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">    REGENERATING</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre></div><h2 id="stan-gracza" tabindex="-1">Stan gracza <a class="header-anchor" href="#stan-gracza" aria-hidden="true">#</a></h2><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki"><code><span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">class</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">SpleefPlayer</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">extends</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">PlayerState</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">private</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">boolean</span><span style="color:#A6ACCD;"> isAlive</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">SpleefPlayer</span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">Player</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;">player</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">boolean</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;">isAlive</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">        super</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">player</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">this.</span><span style="color:#A6ACCD;">isAlive </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> isAlive</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">boolean</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">isAlive</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">return</span><span style="color:#A6ACCD;"> isAlive</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">void</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">setAlive</span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">boolean</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;">alive</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">        isAlive </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> alive</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre></div><h2 id="event-handler" tabindex="-1">Event handler <a class="header-anchor" href="#event-handler" aria-hidden="true">#</a></h2><p><a href="/CraftContainers/pl/learn/component-interaction.html">Dowiedz si\u0119 wi\u0119cej komunikacji komponent\xF3w.</a></p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki"><code><span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">interface</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">SpleefEventHandler</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">void</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">invokePlayerEliminated</span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">SpleefPlayer</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;">spleefPlayer</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre></div><h2 id="g\u0142owny-rdzen-spleef" tabindex="-1">G\u0142\xF3wny rdze\u0144 spleef <a class="header-anchor" href="#g\u0142owny-rdzen-spleef" aria-hidden="true">#</a></h2><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki"><code><span class="line"><span style="color:#89DDFF;">@</span><span style="color:#C792EA;">SingletonComponent</span></span>
<span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">class</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">SpleefCore</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">extends</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Controller</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">implements</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">SpleefEventHandler</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">private</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">GameState</span><span style="color:#A6ACCD;"> gameState </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> GameState</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">WAITING</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">private</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">PlayerManualStorage</span><span style="color:#89DDFF;">&lt;</span><span style="color:#C792EA;">SpleefPlayer</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;"> spleefPlayers </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">PlayerManualStorage</span><span style="color:#89DDFF;">&lt;&gt;();</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;">// Kluczowe lokalizacje areny</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">private</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">final</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">Location</span><span style="color:#A6ACCD;"> spawn</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">private</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">final</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">Location</span><span style="color:#A6ACCD;"> eliminated</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">private</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">final</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">Location</span><span style="color:#A6ACCD;"> snowPos1</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">private</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">final</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">Location</span><span style="color:#A6ACCD;"> snowPos2</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">SpleefCore</span><span style="color:#89DDFF;">(@</span><span style="color:#C792EA;">NotNull</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">Component</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;">parent</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">                      </span><span style="color:#C792EA;">Location</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;">spawn</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">                      </span><span style="color:#C792EA;">Location</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;">eliminated</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">                      </span><span style="color:#C792EA;">Location</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;">snowPos1</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">                      </span><span style="color:#C792EA;">Location</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;">snowPos2</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">        super</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">parent</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">this.</span><span style="color:#A6ACCD;">spawn </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> spawn</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">this.</span><span style="color:#A6ACCD;">eliminated </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> eliminated</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">this.</span><span style="color:#A6ACCD;">snowPos1 </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> snowPos1</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">this.</span><span style="color:#A6ACCD;">snowPos2 </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> snowPos2</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">@</span><span style="color:#C792EA;">Override</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">void</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">onComponentInit</span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">ComponentConstructor</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;">event</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">        </span><span style="color:#676E95;">// Oddzielny ekwipunek na czas gry</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">OtherEquipment</span><span style="color:#89DDFF;">(this).</span><span style="color:#82AAFF;">start</span><span style="color:#89DDFF;">();</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">        </span><span style="color:#676E95;">// Ustaw oddzielny tryb gry na czas gry.</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">OtherGameMode</span><span style="color:#89DDFF;">(this,</span><span style="color:#A6ACCD;"> GameMode</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">SURVIVAL</span><span style="color:#89DDFF;">).</span><span style="color:#82AAFF;">start</span><span style="color:#89DDFF;">();</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">        </span><span style="color:#676E95;">// Oddzielny tryb gry (wszyscy w survivalu)</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">SpleefLogic</span><span style="color:#89DDFF;">(this).</span><span style="color:#82AAFF;">start</span><span style="color:#89DDFF;">();</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">        </span><span style="color:#676E95;">// Start w stanie &quot;oczekiwanie na graczy&quot;</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#82AAFF;">setGameStateWaiting</span><span style="color:#89DDFF;">();</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">@</span><span style="color:#C792EA;">Override</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">void</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">onPlayerInit</span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">PlayerConstructor</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;">event</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">        </span><span style="color:#676E95;">// Ka\u017Cdy nowy gracz dostaje obiekt SpleefPlayer (domy\u015Blnie wyeliminowany)</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#C792EA;">var</span><span style="color:#A6ACCD;"> player </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> event</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">player</span><span style="color:#89DDFF;">();</span></span>
<span class="line"><span style="color:#A6ACCD;">        spleefPlayers</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">createOrThrow</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">player</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> player1 </span><span style="color:#C792EA;">-&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">SpleefPlayer</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">player1</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">false));</span></span>
<span class="line"><span style="color:#A6ACCD;">        player</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">teleport</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">eliminated</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">@</span><span style="color:#C792EA;">Override</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">void</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">onPlayerDestroy</span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">PlayerDestructor</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;">event</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">        </span><span style="color:#676E95;">// Usuni\u0119cie stanu gracza po opuszczeniu areny</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#C792EA;">var</span><span style="color:#A6ACCD;"> player </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> event</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">player</span><span style="color:#89DDFF;">();</span></span>
<span class="line"><span style="color:#A6ACCD;">        spleefPlayers</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">removeOrThrow</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">player</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;">// Daj graczowi \u0142opat\u0119 z enchantem Efficiency IV</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">void</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">giveSpleefItems</span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">Player</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;">player</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#C792EA;">var</span><span style="color:#A6ACCD;"> inv </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> player</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">getInventory</span><span style="color:#89DDFF;">();</span></span>
<span class="line"><span style="color:#A6ACCD;">        inv</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">clear</span><span style="color:#89DDFF;">();</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#C792EA;">var</span><span style="color:#A6ACCD;"> tool </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">ItemStack</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">Material</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">DIAMOND_SHOVEL</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#C792EA;">var</span><span style="color:#A6ACCD;"> meta </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> tool</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">getItemMeta</span><span style="color:#89DDFF;">();</span></span>
<span class="line"><span style="color:#A6ACCD;">        meta</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">addEnchant</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">Enchantment</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">EFFICIENCY</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">4</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">true);</span></span>
<span class="line"><span style="color:#A6ACCD;">        tool</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">setItemMeta</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">meta</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">        inv</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">addItem</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">tool</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">private</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">void</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">setGameStateWaiting</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">        gameState </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> GameState</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">WAITING</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">        </span><span style="color:#676E95;">// Utworzenie lobby (min. 2 graczy)</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#C792EA;">var</span><span style="color:#A6ACCD;"> lobby </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">Lobby</span><span style="color:#89DDFF;">(this,</span><span style="color:#A6ACCD;"> Time</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">seconds</span><span style="color:#89DDFF;">(</span><span style="color:#F78C6C;">4</span><span style="color:#89DDFF;">),</span><span style="color:#A6ACCD;"> spawn</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">32</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">2</span><span style="color:#89DDFF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">        </span><span style="color:#676E95;">// Po zako\u0144czeniu lobby automatyczne przej\u015Bcie do fazy gry</span></span>
<span class="line"><span style="color:#A6ACCD;">        lobby</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">getFinalizeEvent</span><span style="color:#89DDFF;">().</span><span style="color:#82AAFF;">register</span><span style="color:#89DDFF;">(this</span><span style="color:#89DDFF;">::</span><span style="color:#A6ACCD;">setGameStatePlay</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">        lobby</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">start</span><span style="color:#89DDFF;">();</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">        </span><span style="color:#676E95;">// Przeniesienie wszystkich graczy na spawn i wyczyszczenie ekwipunku</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#82AAFF;">players</span><span style="color:#89DDFF;">().</span><span style="color:#82AAFF;">forEach</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">player </span><span style="color:#C792EA;">-&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">            player</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">teleport</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">spawn</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">            player</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">getEquipment</span><span style="color:#89DDFF;">().</span><span style="color:#82AAFF;">clear</span><span style="color:#89DDFF;">();</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">});</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">private</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">void</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">setGameStatePlay</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">        gameState </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> GameState</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">PLAY</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">        </span><span style="color:#676E95;">// Wszyscy gracze staj\u0105 si\u0119 &quot;\u017Cywi&quot;</span></span>
<span class="line"><span style="color:#A6ACCD;">        spleefPlayers</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">forEach</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">spleefPlayer </span><span style="color:#C792EA;">-&gt;</span><span style="color:#A6ACCD;"> spleefPlayer</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">setAlive</span><span style="color:#89DDFF;">(true));</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#82AAFF;">players</span><span style="color:#89DDFF;">().</span><span style="color:#82AAFF;">forEach</span><span style="color:#89DDFF;">(this</span><span style="color:#89DDFF;">::</span><span style="color:#A6ACCD;">giveSpleefItems</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">private</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">void</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">setGameStateRegenerating</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">        gameState </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> GameState</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">REGENERATING</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#82AAFF;">runTaskAsync</span><span style="color:#89DDFF;">(()</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">-&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">            </span><span style="color:#676E95;">// Odbudowanie warstwy \u015Bniegu w tle (FAWE \u2013 bez lag\xF3w dla serwera)</span></span>
<span class="line"><span style="color:#A6ACCD;">            FaweOperations</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">setBlock</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">snowPos1</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> snowPos2</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> Material</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">SNOW_BLOCK</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#89DDFF;">            </span><span style="color:#676E95;">// Po regeneracji powr\xF3t do stanu oczekiwania</span></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#82AAFF;">runTask</span><span style="color:#89DDFF;">(this</span><span style="color:#89DDFF;">::</span><span style="color:#A6ACCD;">setGameStateWaiting</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">});</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">GameState</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">getGameState</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">return</span><span style="color:#A6ACCD;"> gameState</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;">// Wysoko\u015B\u0107, poni\u017Cej kt\xF3rej gracz jest eliminowany</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">int</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">getEliminationY</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">return</span><span style="color:#A6ACCD;"> snowPos1</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">getBlockY</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">3</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">SpleefPlayer</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">getSpleefPlayer</span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">Player</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;">player</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">return</span><span style="color:#A6ACCD;"> spleefPlayers</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">getOrThrow</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">player</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;">// Wywo\u0142ywane, gdy gracz zostanie wyeliminowany (przez logik\u0119 SpleefLogic)</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">@</span><span style="color:#C792EA;">Override</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">void</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">invokePlayerEliminated</span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">SpleefPlayer</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;">spleefPlayer</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#C792EA;">var</span><span style="color:#A6ACCD;"> eliminationMessage </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">\xA7c</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> spleefPlayer</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">getPlayer</span><span style="color:#89DDFF;">().</span><span style="color:#82AAFF;">getName</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;"> has been eliminated!</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#82AAFF;">broadcast</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">eliminationMessage</span><span style="color:#89DDFF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#C792EA;">var</span><span style="color:#A6ACCD;"> remainPlayers </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> spleefPlayers</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">stream</span><span style="color:#89DDFF;">().</span><span style="color:#82AAFF;">filter</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">sp </span><span style="color:#C792EA;">-&gt;</span><span style="color:#A6ACCD;"> sp</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">isAlive</span><span style="color:#89DDFF;">()).</span><span style="color:#82AAFF;">toList</span><span style="color:#89DDFF;">();</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">if</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">remainPlayers</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">size</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">==</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">1</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#C792EA;">var</span><span style="color:#A6ACCD;"> winner </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> remainPlayers</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">getFirst</span><span style="color:#89DDFF;">();</span></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#C792EA;">var</span><span style="color:#A6ACCD;"> winnerMessage </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">\xA76</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> winner</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">getPlayer</span><span style="color:#89DDFF;">().</span><span style="color:#82AAFF;">getName</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;"> has won the game!</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#82AAFF;">broadcast</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">winnerMessage</span><span style="color:#89DDFF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#82AAFF;">setGameStateRegenerating</span><span style="color:#89DDFF;">();</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre></div><h2 id="kontroller-logiki-spleef" tabindex="-1">Kontroller logiki spleef <a class="header-anchor" href="#kontroller-logiki-spleef" aria-hidden="true">#</a></h2><p><a href="/CraftContainers/pl/learn/listeners.html">Dowiedz si\u0119 wi\u0119cej o filtrowaniu event\xF3w bukkit.</a></p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki"><code><span class="line"><span style="color:#676E95;">// Ten komponent mo\u017Ce istnie\u0107 tylko raz w danym kontenerze (wiele instancji SpleefLogic nie ma sensu).</span></span>
<span class="line"><span style="color:#89DDFF;">@</span><span style="color:#C792EA;">SingletonComponent</span></span>
<span class="line"><span style="color:#676E95;">// Komponent wymaga aktywnego SpleefCore \u2013 bez niego logika gry nie ma zastosowania.</span></span>
<span class="line"><span style="color:#89DDFF;">@</span><span style="color:#C792EA;">Dependency</span><span style="color:#89DDFF;">(</span><span style="color:#FFCB6B;">component</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> SpleefCore</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">class</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">class</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">SpleefLogic</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">extends</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Controller</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">SpleefLogic</span><span style="color:#89DDFF;">(@</span><span style="color:#C792EA;">NotNull</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">Component</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;">parent</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">        super</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">parent</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">@</span><span style="color:#C792EA;">Override</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">Listeners</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">defineListeners</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">        </span><span style="color:#676E95;">// Dodaj listener obs\u0142uguj\u0105cy zdarzenia gry</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">return</span><span style="color:#A6ACCD;"> super</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">defineListeners</span><span style="color:#89DDFF;">().</span><span style="color:#82AAFF;">add</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">MyListener</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">class</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;">// AdaptedListener to rozszerzony listener Bukkita,</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;">// pozwalaj\u0105cy filtrowa\u0107 zdarzenia w obr\u0119bie kontenera.</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;">// Nigdy nie implementuj Listenera bezpo\u015Brednio w komponencie,</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;">// bo wtedy jedna instancja obs\u0142ugiwa\u0142aby wiele aren.</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">private</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">static</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">class</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">MyListener</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">implements</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">AdaptedListener</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">@</span><span style="color:#C792EA;">EventHandler</span><span style="color:#89DDFF;">(</span><span style="color:#FFCB6B;">ignoreCancelled</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">true)</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">void</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">onBlockPlace</span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">BlockPlaceEvent</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;">event</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">            </span><span style="color:#676E95;">// Ka\u017Cde zdarzenie Bukkit na pocz\u0105tku pochodzi z globalnego kontekstu serwera.</span></span>
<span class="line"><span style="color:#89DDFF;">            </span><span style="color:#676E95;">// Aby powi\u0105za\u0107 je z w\u0142a\u015Bciw\u0105 aren\u0105, musimy odfiltrowa\u0107 je na podstawie gracza.</span></span>
<span class="line"><span style="color:#89DDFF;">            </span><span style="color:#676E95;">// Najpierw pobieramy kontener przypisany do gracza, kt\xF3ry wywo\u0142a\u0142 zdarzenie.</span></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#C792EA;">var</span><span style="color:#A6ACCD;"> container </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> Container</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">getForPlayer</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">event</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">getPlayer</span><span style="color:#89DDFF;">());</span></span>
<span class="line"><span style="color:#89DDFF;">            </span><span style="color:#676E95;">// Metoda first(...) uruchamia logik\u0119 dla pierwszego komponentu typu SpleefLogic</span></span>
<span class="line"><span style="color:#89DDFF;">            </span><span style="color:#676E95;">// wewn\u0105trz podanego kontenera. Dzi\u0119ki temu mamy pewno\u015B\u0107, \u017Ce zdarzenie zostanie</span></span>
<span class="line"><span style="color:#89DDFF;">            </span><span style="color:#676E95;">// obs\u0142u\u017Cone tylko w ramach w\u0142a\u015Bciwej instancji gry.</span></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#82AAFF;">first</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">container</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> SpleefLogic</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">class</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> spleefLogic </span><span style="color:#C792EA;">-&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">                </span><span style="color:#676E95;">// Po przefiltrowaniu zdarzenia i upewnieniu si\u0119, \u017Ce dotyczy w\u0142a\u015Bciwego</span></span>
<span class="line"><span style="color:#89DDFF;">                </span><span style="color:#676E95;">// kontenera, anulujemy mo\u017Cliwo\u015B\u0107 stawiania blok\xF3w na arenie.</span></span>
<span class="line"><span style="color:#A6ACCD;">                event</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">setCancelled</span><span style="color:#89DDFF;">(true);</span></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#89DDFF;">});</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">@</span><span style="color:#C792EA;">EventHandler</span><span style="color:#89DDFF;">(</span><span style="color:#FFCB6B;">ignoreCancelled</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">true)</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">void</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">onBlockBreak</span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">BlockBreakEvent</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;">event</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#C792EA;">var</span><span style="color:#A6ACCD;"> player </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> event</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">getPlayer</span><span style="color:#89DDFF;">();</span></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#C792EA;">var</span><span style="color:#A6ACCD;"> container </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> Container</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">getForPlayer</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">player</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#82AAFF;">first</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">container</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> SpleefLogic</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">class</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> spleefLogic </span><span style="color:#C792EA;">-&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">                </span><span style="color:#676E95;">// Poniewa\u017C ustawili\u015Bmy zale\u017Cno\u015B\u0107 @Dependency(component = SpleefCore.class),</span></span>
<span class="line"><span style="color:#89DDFF;">                </span><span style="color:#676E95;">// mo\u017Cemy pobra\u0107 g\u0142\xF3wny komponent SpleefCore i komunikowa\u0107 si\u0119 z nim.</span></span>
<span class="line"><span style="color:#89DDFF;">                </span><span style="color:#676E95;">//</span></span>
<span class="line"><span style="color:#89DDFF;">                </span><span style="color:#676E95;">// Wskaz\xF3wka: gdyby ta zale\u017Cno\u015B\u0107 nie by\u0142a zadeklarowana, nadal mogliby\u015Bmy</span></span>
<span class="line"><span style="color:#89DDFF;">                </span><span style="color:#676E95;">// spr\xF3bowa\u0107 go wyszuka\u0107, ale wynik m\xF3g\u0142by by\u0107 null.</span></span>
<span class="line"><span style="color:#A6ACCD;">                </span><span style="color:#C792EA;">var</span><span style="color:#A6ACCD;"> core </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> spleefLogic</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">useComponent</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">SpleefCore</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">class</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">                </span><span style="color:#C792EA;">var</span><span style="color:#A6ACCD;"> spleefPlayer </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> core</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">getSpleefPlayer</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">player</span><span style="color:#89DDFF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">                </span><span style="color:#676E95;">// Pozwalamy niszczy\u0107 bloki \u015Bniegu tylko w trakcie aktywnej gry,</span></span>
<span class="line"><span style="color:#89DDFF;">                </span><span style="color:#676E95;">// pod warunkiem \u017Ce gracz jest \u017Cywy i rzeczywi\u015Bcie niszczy blok \u015Bniegu.</span></span>
<span class="line"><span style="color:#A6ACCD;">                </span><span style="color:#89DDFF;">if</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">event</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">getBlock</span><span style="color:#89DDFF;">().</span><span style="color:#82AAFF;">getType</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">==</span><span style="color:#A6ACCD;"> Material</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">SNOW_BLOCK </span><span style="color:#89DDFF;">&amp;&amp;</span><span style="color:#A6ACCD;"> spleefPlayer</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">isAlive</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&amp;&amp;</span><span style="color:#A6ACCD;"> core</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">getGameState</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">==</span><span style="color:#A6ACCD;"> GameState</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">PLAY</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">                    event</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">setDropItems</span><span style="color:#89DDFF;">(false);</span></span>
<span class="line"><span style="color:#A6ACCD;">                    player</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">getInventory</span><span style="color:#89DDFF;">().</span><span style="color:#82AAFF;">addItem</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">ItemStack</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">Material</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">SNOWBALL</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">4</span><span style="color:#89DDFF;">));</span></span>
<span class="line"><span style="color:#A6ACCD;">                </span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">else</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">                    event</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">setCancelled</span><span style="color:#89DDFF;">(true);</span></span>
<span class="line"><span style="color:#A6ACCD;">                </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#89DDFF;">});</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">        </span><span style="color:#676E95;">// Blokujemy mo\u017Cliwo\u015B\u0107 wyrzucania przedmiot\xF3w z ekwipunku.</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">@</span><span style="color:#C792EA;">EventHandler</span><span style="color:#89DDFF;">(</span><span style="color:#FFCB6B;">ignoreCancelled</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">true)</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">void</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">onPlayerDropItem</span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">PlayerDropItemEvent</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;">event</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#C792EA;">var</span><span style="color:#A6ACCD;"> container </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> Container</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">getForPlayer</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">event</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">getPlayer</span><span style="color:#89DDFF;">());</span></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#82AAFF;">first</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">container</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> SpleefLogic</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">class</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> spleefLogic </span><span style="color:#C792EA;">-&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">                event</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">setCancelled</span><span style="color:#89DDFF;">(true);</span></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#89DDFF;">});</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">        </span><span style="color:#676E95;">// Zapobiegamy niszczeniu si\u0119 przedmiot\xF3w poprzez wyzerowanie ich obra\u017Ce\u0144.</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">@</span><span style="color:#C792EA;">EventHandler</span><span style="color:#89DDFF;">(</span><span style="color:#FFCB6B;">ignoreCancelled</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">true)</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">void</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">onPlayerItemDamage</span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">PlayerItemDamageEvent</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;">event</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#C792EA;">var</span><span style="color:#A6ACCD;"> container </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> Container</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">getForPlayer</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">event</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">getPlayer</span><span style="color:#89DDFF;">());</span></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#82AAFF;">first</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">container</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> SpleefLogic</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">class</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> spleefLogic </span><span style="color:#C792EA;">-&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">                event</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">setDamage</span><span style="color:#89DDFF;">(</span><span style="color:#F78C6C;">0</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#89DDFF;">});</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">        </span><span style="color:#676E95;">// Wy\u0142\u0105czamy mo\u017Cliwo\u015B\u0107 otrzymywania obra\u017Ce\u0144 przez graczy</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">@</span><span style="color:#C792EA;">EventHandler</span><span style="color:#89DDFF;">(</span><span style="color:#FFCB6B;">ignoreCancelled</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">true)</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">void</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">onEntityDamage</span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">EntityDamageEvent</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;">event</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#89DDFF;">if</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(!(</span><span style="color:#A6ACCD;">event</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">getEntity</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">instanceof</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">Player</span><span style="color:#A6ACCD;"> player</span><span style="color:#89DDFF;">))</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">return</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#C792EA;">var</span><span style="color:#A6ACCD;"> container </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> Container</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">getForPlayer</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">player</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#82AAFF;">first</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">container</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> SpleefLogic</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">class</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> spleefLogic </span><span style="color:#C792EA;">-&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">                event</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">setDamage</span><span style="color:#89DDFF;">(</span><span style="color:#F78C6C;">0</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#89DDFF;">});</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">        </span><span style="color:#676E95;">// Trafienie gracza \u015Bnie\u017Ck\u0105 powoduje silne odepchni\u0119cie w kierunku jej lotu.</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">@</span><span style="color:#C792EA;">EventHandler</span><span style="color:#89DDFF;">(</span><span style="color:#FFCB6B;">ignoreCancelled</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">true)</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">void</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">onEntityDamageByEntity</span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">EntityDamageByEntityEvent</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;">event</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#89DDFF;">if</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(!(</span><span style="color:#A6ACCD;">event</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">getEntity</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">instanceof</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">Player</span><span style="color:#A6ACCD;"> victim</span><span style="color:#89DDFF;">))</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">return</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#89DDFF;">if</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(!(</span><span style="color:#A6ACCD;">event</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">getDamager</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">instanceof</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">Snowball</span><span style="color:#A6ACCD;"> snowball</span><span style="color:#89DDFF;">))</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">return</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#C792EA;">var</span><span style="color:#A6ACCD;"> container </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> Container</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">getForPlayer</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">victim</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#82AAFF;">first</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">container</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> SpleefLogic</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">class</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> spleefLogic </span><span style="color:#C792EA;">-&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">                </span><span style="color:#C792EA;">var</span><span style="color:#A6ACCD;"> knockback </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> snowball</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">getVelocity</span><span style="color:#89DDFF;">().</span><span style="color:#82AAFF;">normalize</span><span style="color:#89DDFF;">().</span><span style="color:#82AAFF;">multiply</span><span style="color:#89DDFF;">(</span><span style="color:#F78C6C;">1.5</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">                victim</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">setVelocity</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">knockback</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#89DDFF;">});</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">        </span><span style="color:#676E95;">// \u015Anie\u017Cki mog\u0105 niszczy\u0107 bloki \u015Bniegu.</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">@</span><span style="color:#C792EA;">EventHandler</span><span style="color:#89DDFF;">(</span><span style="color:#FFCB6B;">ignoreCancelled</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">true)</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">void</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">onProjectileHit</span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">ProjectileHitEvent</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;">event</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#89DDFF;">if</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(!(</span><span style="color:#A6ACCD;">event</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">getEntity</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">instanceof</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">Snowball</span><span style="color:#A6ACCD;"> snowball</span><span style="color:#89DDFF;">))</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">return</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#89DDFF;">if</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(!(</span><span style="color:#A6ACCD;">snowball</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">getShooter</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">instanceof</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">Player</span><span style="color:#A6ACCD;"> player</span><span style="color:#89DDFF;">))</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">return</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#C792EA;">var</span><span style="color:#A6ACCD;"> block </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> event</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">getHitBlock</span><span style="color:#89DDFF;">();</span></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#89DDFF;">if</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">block </span><span style="color:#89DDFF;">==</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">null</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">||</span><span style="color:#A6ACCD;"> block</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">getType</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">!=</span><span style="color:#A6ACCD;"> Material</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">SNOW_BLOCK</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">return</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#C792EA;">var</span><span style="color:#A6ACCD;"> container </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> Container</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">getForPlayer</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">player</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#82AAFF;">first</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">container</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> SpleefLogic</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">class</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> spleefLogic </span><span style="color:#C792EA;">-&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">                </span><span style="color:#C792EA;">var</span><span style="color:#A6ACCD;"> core </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> spleefLogic</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">useComponent</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">SpleefCore</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">class</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">                </span><span style="color:#C792EA;">var</span><span style="color:#A6ACCD;"> spleefPlayer </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> core</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">getSpleefPlayer</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">player</span><span style="color:#89DDFF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">                </span><span style="color:#676E95;">// \u015Anie\u017Cki mog\u0105 niszczy\u0107 bloki \u015Bniegu tylko wtedy,</span></span>
<span class="line"><span style="color:#89DDFF;">                </span><span style="color:#676E95;">// gdy gra jest w toku i gracz nie zosta\u0142 wyeliminowany.</span></span>
<span class="line"><span style="color:#A6ACCD;">                </span><span style="color:#89DDFF;">if</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">core</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">getGameState</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">!=</span><span style="color:#A6ACCD;"> GameState</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">PLAY </span><span style="color:#89DDFF;">||</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">!</span><span style="color:#A6ACCD;">spleefPlayer</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">isAlive</span><span style="color:#89DDFF;">())</span></span>
<span class="line"><span style="color:#A6ACCD;">                    </span><span style="color:#89DDFF;">return</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">                block</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">setType</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">Material</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">AIR</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#89DDFF;">});</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">        </span><span style="color:#676E95;">// Logika eliminacji gracza.</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">@</span><span style="color:#C792EA;">EventHandler</span><span style="color:#89DDFF;">(</span><span style="color:#FFCB6B;">ignoreCancelled</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">true)</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">void</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">onPlayerMove</span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">PlayerMoveEvent</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;">event</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#C792EA;">var</span><span style="color:#A6ACCD;"> fromY </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> event</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">getFrom</span><span style="color:#89DDFF;">().</span><span style="color:#82AAFF;">getBlockY</span><span style="color:#89DDFF;">();</span></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#C792EA;">var</span><span style="color:#A6ACCD;"> toY </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> event</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">getTo</span><span style="color:#89DDFF;">().</span><span style="color:#82AAFF;">getBlockY</span><span style="color:#89DDFF;">();</span></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#89DDFF;">if</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">fromY </span><span style="color:#89DDFF;">==</span><span style="color:#A6ACCD;"> toY</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">return</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#C792EA;">var</span><span style="color:#A6ACCD;"> player </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> event</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">getPlayer</span><span style="color:#89DDFF;">();</span></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#C792EA;">var</span><span style="color:#A6ACCD;"> container </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> Container</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">getForPlayer</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">player</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#82AAFF;">first</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">container</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> SpleefLogic</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">class</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> spleefLogic </span><span style="color:#C792EA;">-&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">                </span><span style="color:#C792EA;">var</span><span style="color:#A6ACCD;"> core </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> spleefLogic</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">useComponent</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">SpleefCore</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">class</span><span style="color:#89DDFF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">                </span><span style="color:#676E95;">// Ignorujemy zdarzenie, je\u017Celi gracz wci\u0105\u017C znajduje si\u0119 powy\u017Cej</span></span>
<span class="line"><span style="color:#89DDFF;">                </span><span style="color:#676E95;">// poziomu eliminacji (eliminationY).</span></span>
<span class="line"><span style="color:#A6ACCD;">                </span><span style="color:#89DDFF;">if</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">toY </span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;"> core</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">getEliminationY</span><span style="color:#89DDFF;">())</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">return</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">                </span><span style="color:#C792EA;">var</span><span style="color:#A6ACCD;"> spleefPlayer </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> core</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">getSpleefPlayer</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">player</span><span style="color:#89DDFF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">                </span><span style="color:#676E95;">// Nie eliminujemy gracza, je\u015Bli jest ju\u017C martwy</span></span>
<span class="line"><span style="color:#89DDFF;">                </span><span style="color:#676E95;">// albo je\u015Bli rozgrywka aktualnie nie trwa.</span></span>
<span class="line"><span style="color:#A6ACCD;">                </span><span style="color:#89DDFF;">if</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">core</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">getGameState</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">!=</span><span style="color:#A6ACCD;"> GameState</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">PLAY </span><span style="color:#89DDFF;">||</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">!</span><span style="color:#A6ACCD;">spleefPlayer</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">isAlive</span><span style="color:#89DDFF;">())</span></span>
<span class="line"><span style="color:#A6ACCD;">                    </span><span style="color:#89DDFF;">return</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">                </span><span style="color:#676E95;">// Oznaczamy gracza jako wyeliminowanego.</span></span>
<span class="line"><span style="color:#A6ACCD;">                spleefPlayer</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">setAlive</span><span style="color:#89DDFF;">(false);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">                </span><span style="color:#676E95;">// Powiadamiamy wszystkie komponenty obs\u0142uguj\u0105ce zdarzenia Spleefa</span></span>
<span class="line"><span style="color:#89DDFF;">                </span><span style="color:#676E95;">// o fakcie eliminacji gracza.</span></span>
<span class="line"><span style="color:#A6ACCD;">                container</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">forEachComponents</span><span style="color:#89DDFF;">(</span></span>
<span class="line"><span style="color:#A6ACCD;">                        SpleefEventHandler</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">class</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">                        spleefEventHandler </span><span style="color:#C792EA;">-&gt;</span><span style="color:#A6ACCD;"> spleefEventHandler</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">invokePlayerEliminated</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">spleefPlayer</span><span style="color:#89DDFF;">));</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#89DDFF;">});</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre></div><h2 id="g\u0142owna-klasa-kontenera" tabindex="-1">G\u0142\xF3wna klasa kontenera <a class="header-anchor" href="#g\u0142owna-klasa-kontenera" aria-hidden="true">#</a></h2><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki"><code><span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">class</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">SpleefContainer</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">extends</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Container</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">SpleefContainer</span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">JavaPlugin</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;">plugin</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">        super</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">plugin</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">@</span><span style="color:#C792EA;">Override</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">protected</span><span style="color:#A6ACCD;"> @</span><span style="color:#C792EA;">NotNull</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">GameMap</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">defaultBoard</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">return</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">SpleefGameMap</span><span style="color:#89DDFF;">(this);</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre></div><h2 id="uruchamianie" tabindex="-1">Uruchamianie <a class="header-anchor" href="#uruchamianie" aria-hidden="true">#</a></h2><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki"><code><span class="line"><span style="color:#676E95;">//...</span></span>
<span class="line"><span style="color:#676E95;">// Tworzenie nowej instancji gry</span></span>
<span class="line"><span style="color:#C792EA;">var</span><span style="color:#A6ACCD;"> spleef </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">SpleefContainer</span><span style="color:#89DDFF;">(this);</span></span>
<span class="line"><span style="color:#A6ACCD;">spleef</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">start</span><span style="color:#89DDFF;">();</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;">// Dodawanie gracza do instancji</span></span>
<span class="line"><span style="color:#A6ACCD;">spleef</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">addPlayer</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">player</span><span style="color:#89DDFF;">);</span></span>
<span class="line"></span></code></pre></div>`,29),t=[e];function c(r,y,D,A,F,C){return a(),n("div",null,t)}const d=s(o,[["render",c]]);export{E as __pageData,d as default};
